# スレッド形式記録アプリケーション開発計画

## 要件定義

### システム概要

- **名称**: スレッド形式記録アプリケーション（t-note）
- **種類**: Web アプリケーション
- **技術スタック**: Remix + データベース

### 機能要件

#### 1. ユーザー管理

- 認証済みユーザーのみがアプリケーションを利用可能
- サインアップ機能は含まない（事前に完了済み）
- ログイン/ログアウト機能

#### 2. コア機能

- **Topic 作成**: 新しい話題・トピックを作成
- **スレッド投稿**: Topic に対する返信の連鎖を作成
- **マークダウン対応**: 投稿内容にマークダウン記法を使用可能
- **投稿表示**: スレッド形式での投稿表示
- **一覧表示**: Topic/スレッド一覧の表示

#### 3. 追加機能

- **タグ付け**: Topic やスレッドにタグを付与
- **投稿編集**: 自分の投稿の編集機能
- **投稿削除**: 自分の投稿の削除機能

### 技術要件

- **フロントエンド**: Remix（React-based）
- **データベース**: SQLite/PostgreSQL 等
- **認証**: セッション管理
- **マークダウン**: マークダウンパーサー/レンダラー

### データ構造

```
User (ユーザー)
├── id
├── username
├── email
└── created_at

Topic (トピック)
├── id
├── title
├── content (markdown)
├── user_id
├── tags
└── created_at

Post (投稿/返信)
├── id
├── content (markdown)
├── topic_id
├── parent_post_id (スレッド構造用)
├── user_id
└── created_at

Tag (タグ)
├── id
└── name
```

## 実装計画

**開発手法**: Kent Beck の TDD（Test-Driven Development）

- 各サブタスクは必ずテスト実装から開始
- Red → Green → Refactor のサイクルを厳守

### Phase 1: プロジェクト基盤構築

- [ ] Remix プロジェクトの初期化 + テスト環境設定
- [ ] データベース設定（Prisma + SQLite） + DB 接続テスト
- [ ] 基本的なフォルダ構造とルーティング設定 + ルーティングテスト
- [ ] 認証システムの実装 + 認証テスト

### Phase 2: コア機能実装

- [ ] ユーザー認証（ログイン/ログアウト） + 認証フローテスト
- [ ] Topic の作成・表示機能 + CRUD 操作テスト
- [ ] スレッド投稿機能（返信の連鎖） + スレッド構造テスト
- [ ] マークダウンレンダリング機能 + レンダリングテスト
- [ ] 一覧表示機能 + 表示ロジックテスト

### Phase 3: 追加機能実装

- [ ] タグ付け機能 + タグ操作テスト
- [ ] 投稿編集機能 + 編集権限・バリデーションテスト
- [ ] 投稿削除機能 + 削除権限・整合性テスト
- [ ] UI/UX の改善 + E2E テスト

### Phase 4: 最終調整

- [ ] 統合テスト実装
- [ ] パフォーマンステスト
- [ ] セキュリティテスト
- [ ] デプロイ準備

## 技術構成

- Remix (React-based framework)
- Prisma (ORM)
- SQLite (開発用 DB)
- React Markdown (マークダウンレンダリング)
- Tailwind CSS (スタイリング)
- Vitest (テストフレームワーク)
- @testing-library/react (React テスト)
- Playwright (E2E テスト)
